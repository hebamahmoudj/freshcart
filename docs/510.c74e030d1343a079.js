"use strict";(self.webpackChunkFreshcart=self.webpackChunkFreshcart||[]).push([[510],{9510:(h,p,r)=>{r.r(p),r.d(p,{ProductsComponent:()=>O});var u=r(6814),_=r(1120),g=r(460),d=r(6472),c=r(6787),m=r(95),t=r(4769),i=r(0),C=r(6286),v=r(2425);function P(s,l){if(1&s&&t._UZ(0,"i",21),2&s){const e=l.$implicit,o=t.oxw().$implicit;t.ekj("rating-color",o.ratingsAverage>=e)}}const E=function(s){return["/productdetails",s]},x=function(){return[1,2,3,4,5]};function f(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"header",10),t._UZ(3,"img",11),t.TgZ(4,"h3",12),t._uU(5),t.ALo(6,"cuttext"),t.qZA(),t.TgZ(7,"h4",13),t._uU(8),t.qZA(),t.TgZ(9,"div",14)(10,"span",15),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"span"),t.YNc(14,P,1,2,"i",16),t.TgZ(15,"span",17),t._uU(16),t.qZA()()()(),t.TgZ(17,"footer",18)(18,"button",19,20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,D=t.MAs(19),T=t.oxw(2);return t.KtG(T.addproducttocart(a._id,D))}),t._uU(20,"+Add to cart"),t.qZA()()()()}if(2&s){const e=l.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(13,E,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH),t.xp6(2),t.Oqu(t.xi3(6,7,e.title,3)),t.xp6(3),t.Oqu(e.category.name),t.xp6(3),t.Oqu(t.xi3(12,10,e.price,"e\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(15,x)),t.xp6(2),t.Oqu(e.ratingsAverage)}}const A=function(s,l,e){return{id:"productpangenate",itemsPerPage:s,currentPage:l,totalItems:e}};function M(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"section",1)(1,"h2",2),t._uU(2,"All products"),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.searchword=n)}),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,f,21,16,"div",5),t.ALo(6,"paginate"),t.ALo(7,"search"),t.qZA(),t.TgZ(8,"div",6)(9,"pagination-controls",7),t.NdJ("pageChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.pageChanged(n))})("pageBoundsCorrection",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.pageChanged(n))}),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.searchword),t.xp6(2),t.Q6J("ngForOf",t.xi3(6,6,t.xi3(7,9,e.products,e.searchword),t.kEZ(12,A,e.pageSize,e.currentpage,e.total))),t.xp6(4),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}let O=(()=>{class s{constructor(e,o,n,a){this._ProductService=e,this._CartService=o,this._Renderer2=n,this.toastr=a,this.pageSize=0,this.currentpage=1,this.total=0,this.searchword="",this.products=[]}ngOnInit(){this._ProductService.getAllProducts().subscribe({next:e=>{this.products=e.data,console.log(e),this.pageSize=e.metadata.limit,this.currentpage=e.metadata.currentPage,this.total=e.results}})}addproducttocart(e,o){this._Renderer2.setAttribute(o,"disabled","true"),this._CartService.addtocart(e).subscribe({next:n=>{this.toastr.success(n.message),this._Renderer2.removeAttribute(o,"disabled"),this._CartService.cartNumber.next(n.numOfCartItems)},error:n=>{this._Renderer2.removeAttribute(o,"disabled")}})}pageChanged(e){this._ProductService.getAllProducts(e).subscribe({next:o=>{this.products=o.data,console.log(o),this.pageSize=o.metadata.limit,this.currentpage=o.metadata.currentPage,this.total=o.results}})}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(i.M),t.Y36(C.N),t.Y36(t.Qsj),t.Y36(v._W))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","mb-5 mt-3 p-3",4,"ngIf"],[1,"mb-5","mt-3","p-3"],[1,"my-5","text-center"],["type","text","placeholder","serach.....",1,"form-control","w-50","mx-auto","p-3","mb-5","shadow",3,"ngModel","ngModelChange"],[1,"row","g-4","justify-content-center"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["id","productpangenate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100","py-1"],["role","button",3,"routerLink"],["alt","product.title",1,"w-100",3,"src"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,""],["class","fas fa-star ",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"mt-1"],[1,"main-btn","w-100","py-2","rounded",3,"click"],["btn",""],[1,"fas","fa-star"]],template:function(o,n){1&o&&t.YNc(0,M,10,16,"section",0),2&o&&t.Q6J("ngIf",n.products.length>0)},dependencies:[u.ez,u.sg,u.O5,u.H9,_.rH,g.r,d.JX,d._s,d.LS,c.C,m.u5,m.Fj,m.JJ,m.On]})}return s})()},6286:(h,p,r)=>{r.d(p,{N:()=>d});var u=r(5619),_=r(4769),g=r(9862);let d=(()=>{class c{constructor(t){this._HttpClient=t,this.cartNumber=new u.X(0),this.baseurl="https://ecommerce.routemisr.com/api/v1/"}addtocart(t){return this._HttpClient.post(this.baseurl+"cart",{productId:t})}getloggedusercart(){return this._HttpClient.get(this.baseurl+"cart")}updateproductquentitiy(t,i){return this._HttpClient.put(this.baseurl+`cart/${t}`,{count:i})}removeItem(t){return this._HttpClient.delete(this.baseurl+`cart/${t}`)}clearcart(){return this._HttpClient.delete(this.baseurl+"cart")}checkout(t,i){return this._HttpClient.post(` https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${t}?url=https://hebamahmoudj.github.io/freshcart/#/`,{shippingAddress:i})}checkoutcash(t,i){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/${t}`,{shippingAddress:i})}static#t=this.\u0275fac=function(i){return new(i||c)(_.LFG(g.eN))};static#e=this.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},0:(h,p,r)=>{r.d(p,{M:()=>d});var u=r(5619),_=r(4769),g=r(9862);let d=(()=>{class c{constructor(t){this._HttpClient=t,this.scrolly=new u.X(!1)}getAllProducts(t=1){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products?page=${t}`)}getAllcategories(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/categories")}getproductdetails(t){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products/${t}`)}getcategorydetails(t){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/categories/${t}`)}getAllBrands(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/brands")}getBrandDetails(t){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/brands/${t}`)}static#t=this.\u0275fac=function(i){return new(i||c)(_.LFG(g.eN))};static#e=this.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);