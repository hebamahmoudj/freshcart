"use strict";(self.webpackChunkFreshcart=self.webpackChunkFreshcart||[]).push([[80],{5080:(g,u,r)=>{r.r(u),r.d(u,{WishlistComponent:()=>O});var _=r(6814),d=r(460),p=r(1120),t=r(4769),a=r(9196),v=r(2425),c=r(6286);function n(i,h){if(1&i&&t._UZ(0,"i",19),2&i){const s=h.$implicit,e=t.oxw().$implicit;t.ekj("rating-color",e.ratingsAverage>=s)}}const f=function(i){return["/productdetails",i]},x=function(){return[1,2,3,4,5]};function C(i,h){if(1&i){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"i",7),t.NdJ("click",function(){const l=t.CHM(s).$implicit,m=t.oxw(2);return t.KtG(m.removefromwishlist(l._id))}),t.qZA(),t.TgZ(3,"header",8),t._UZ(4,"img",9),t.TgZ(5,"h3",10),t._uU(6),t.ALo(7,"cuttext"),t.qZA(),t.TgZ(8,"h4",11),t._uU(9),t.qZA(),t.TgZ(10,"div",12)(11,"span",13),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"span"),t.YNc(15,n,1,2,"i",14),t.TgZ(16,"span",15),t._uU(17),t.qZA()()()(),t.TgZ(18,"footer",16)(19,"button",17,18),t.NdJ("click",function(){const l=t.CHM(s).$implicit,m=t.MAs(20),A=t.oxw(2);return t.KtG(A.addproducttocart(l._id,m))}),t._uU(21,"+Add to cart"),t.qZA()()()()}if(2&i){const s=h.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(13,f,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH),t.xp6(2),t.Oqu(t.xi3(7,7,s.title,3)),t.xp6(3),t.Oqu(s.category.name),t.xp6(3),t.Oqu(t.xi3(13,10,s.price,"e\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(15,x)),t.xp6(2),t.Oqu(s.ratingsAverage)}}function E(i,h){if(1&i&&(t.TgZ(0,"section",2)(1,"div",3),t.YNc(2,C,22,16,"div",4),t.qZA()()),2&i){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.products)}}let O=(()=>{class i{constructor(s,e,o,l){this._WishlistService=s,this.toastr=e,this._CartService=o,this._Renderer2=l,this.allwishlistid=[],this.products=[]}ngOnInit(){this._WishlistService.getloggeduserwishlis().subscribe({next:s=>{this.products=s.data}})}addwishlist(s){this._WishlistService.addproductTowishlist(s).subscribe({next:e=>{this.allwishlistid=e.data,console.log("wisdsh"+e),this.toastr.success(e.message)}})}removefromwishlist(s){this._WishlistService.removefromwishlist(s).subscribe({next:e=>{this._WishlistService.getloggeduserwishlis().subscribe({next:o=>{this.products=o.data,this._WishlistService.wishlistnums.next(o.data.length)}})}})}addproducttocart(s,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.addtocart(s).subscribe({next:o=>{this.toastr.success(o.message),this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartNumber.next(o.numOfCartItems)},error:o=>{this._Renderer2.removeAttribute(e,"disabled")}})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(a.M),t.Y36(v._W),t.Y36(c.N),t.Y36(t.Qsj))};static#s=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["class","mb-4 mt-4",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"mb-4","mt-4"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100","py-1"],[1,"fas","fa-heart","heart","text-main",3,"click"],["role","button",3,"routerLink"],["alt","product.title",1,"w-100",3,"src"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,""],["class","fas fa-star font-sm",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"mt-1"],[1,"main-btn","w-100","py-2","rounded",3,"click"],["btn",""],[1,"fas","fa-star","font-sm"]],template:function(e,o){1&e&&(t.YNc(0,E,3,1,"section",0),t._UZ(1,"div",1)),2&e&&t.Q6J("ngIf",o.products.length>0)},dependencies:[_.ez,_.sg,_.O5,_.H9,d.r,p.rH]})}return i})()},6286:(g,u,r)=>{r.d(u,{N:()=>t});var _=r(5619),d=r(4769),p=r(9862);let t=(()=>{class a{constructor(c){this._HttpClient=c,this.cartNumber=new _.X(0),this.baseurl="https://ecommerce.routemisr.com/api/v1/"}addtocart(c){return this._HttpClient.post(this.baseurl+"cart",{productId:c})}getloggedusercart(){return this._HttpClient.get(this.baseurl+"cart")}updateproductquentitiy(c,n){return this._HttpClient.put(this.baseurl+`cart/${c}`,{count:n})}removeItem(c){return this._HttpClient.delete(this.baseurl+`cart/${c}`)}clearcart(){return this._HttpClient.delete(this.baseurl+"cart")}checkout(c,n){return this._HttpClient.post(` https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${c}?url=https://hebamahmoudj.github.io/freshcart/#/`,{shippingAddress:n})}checkoutcash(c,n){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/${c}`,{shippingAddress:n})}static#t=this.\u0275fac=function(n){return new(n||a)(d.LFG(p.eN))};static#s=this.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);