"use strict";(self.webpackChunkFreshcart=self.webpackChunkFreshcart||[]).push([[510],{9510:(h,p,o)=>{o.r(p),o.d(p,{ProductsComponent:()=>O});var a=o(6814),l=o(1120),m=o(460),i=o(6472),d=o(6787),s=o(95),t=o(4769),u=o(0),C=o(6286),v=o(2425);function P(n,g){if(1&n&&t._UZ(0,"i",21),2&n){const e=g.$implicit,r=t.oxw().$implicit;t.ekj("rating-color",r.ratingsAverage>=e)}}const x=function(n){return["/productdetails",n]},f=function(){return[1,2,3,4,5]};function E(n,g){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"header",10),t._UZ(3,"img",11),t.TgZ(4,"h3",12),t._uU(5),t.ALo(6,"cuttext"),t.qZA(),t.TgZ(7,"h4",13),t._uU(8),t.qZA(),t.TgZ(9,"div",14)(10,"span",15),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"span"),t.YNc(14,P,1,2,"i",16),t.TgZ(15,"span",17),t._uU(16),t.qZA()()()(),t.TgZ(17,"footer",18)(18,"button",19,20),t.NdJ("click",function(){const _=t.CHM(e).$implicit,T=t.MAs(19),D=t.oxw(2);return t.KtG(D.addproducttocart(_._id,T))}),t._uU(20,"+Add to cart"),t.qZA()()()()}if(2&n){const e=g.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(13,x,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH),t.xp6(2),t.Oqu(t.xi3(6,7,e.title,3)),t.xp6(3),t.Oqu(e.category.name),t.xp6(3),t.Oqu(t.xi3(12,10,e.price,"e\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(15,f)),t.xp6(2),t.Oqu(e.ratingsAverage)}}const A=function(n,g,e){return{id:"productpangenate",itemsPerPage:n,currentPage:g,totalItems:e}};function M(n,g){if(1&n){const e=t.EpF();t.TgZ(0,"section",1)(1,"h2",2),t._uU(2,"All products"),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(c){t.CHM(e);const _=t.oxw();return t.KtG(_.searchword=c)}),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,E,21,16,"div",5),t.ALo(6,"paginate"),t.ALo(7,"search"),t.qZA(),t.TgZ(8,"div",6)(9,"pagination-controls",7),t.NdJ("pageChange",function(c){t.CHM(e);const _=t.oxw();return t.KtG(_.pageChanged(c))})("pageBoundsCorrection",function(c){t.CHM(e);const _=t.oxw();return t.KtG(_.pageChanged(c))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.searchword),t.xp6(2),t.Q6J("ngForOf",t.xi3(6,6,t.xi3(7,9,e.products,e.searchword),t.kEZ(12,A,e.pageSize,e.currentpage,e.total))),t.xp6(4),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}let O=(()=>{class n{constructor(e,r,c,_){this._ProductService=e,this._CartService=r,this._Renderer2=c,this.toastr=_,this.pageSize=0,this.currentpage=1,this.total=0,this.searchword="",this.products=[]}ngOnInit(){this._ProductService.getAllProducts().subscribe({next:e=>{this.products=e.data,console.log(e),this.pageSize=e.metadata.limit,this.currentpage=e.metadata.currentPage,this.total=e.results}})}addproducttocart(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addtocart(e).subscribe({next:c=>{this.toastr.success(c.message),this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartNumber.next(c.numOfCartItems)},error:c=>{this._Renderer2.removeAttribute(r,"disabled")}})}pageChanged(e){this._ProductService.getAllProducts(e).subscribe({next:r=>{this.products=r.data,console.log(r),this.pageSize=r.metadata.limit,this.currentpage=r.metadata.currentPage,this.total=r.results}})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(u.M),t.Y36(C.N),t.Y36(t.Qsj),t.Y36(v._W))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","mb-5 mt-3 p-3",4,"ngIf"],[1,"mb-5","mt-3","p-3"],[1,"my-5","text-center"],["type","text","placeholder","serach.....",1,"form-control","w-50","mx-auto","p-3","mb-5","shadow",3,"ngModel","ngModelChange"],[1,"row","g-4","justify-content-center"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["id","productpangenate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100","py-1"],["role","button",3,"routerLink"],["alt","product.title",1,"w-100",3,"src"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,""],["class","fas fa-star ",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"mt-1"],[1,"main-btn","w-100","py-2","rounded",3,"click"],["btn",""],[1,"fas","fa-star"]],template:function(r,c){1&r&&t.YNc(0,M,10,16,"section",0),2&r&&t.Q6J("ngIf",c.products.length>0)},dependencies:[a.ez,a.sg,a.O5,a.H9,l.rH,m.r,i.JX,i._s,i.LS,d.C,s.u5,s.Fj,s.JJ,s.On]})}return n})()},6286:(h,p,o)=>{o.d(p,{N:()=>i});var a=o(5619),l=o(4769),m=o(9862);let i=(()=>{class d{constructor(t){this._HttpClient=t,this.cartNumber=new a.X(0),this.baseurl="https://ecommerce.routemisr.com/api/v1/"}addtocart(t){return this._HttpClient.post(this.baseurl+"cart",{productId:t})}getloggedusercart(){return this._HttpClient.get(this.baseurl+"cart")}updateproductquentitiy(t,u){return this._HttpClient.put(this.baseurl+`cart/${t}`,{count:u})}removeItem(t){return this._HttpClient.delete(this.baseurl+`cart/${t}`)}clearcart(){return this._HttpClient.delete(this.baseurl+"cart")}checkout(t,u){return this._HttpClient.post(` https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${t}?url=https://hebamahmoudj.github.io/freshcart/#/`,{shippingAddress:u})}checkoutcash(t,u){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/${t}`,{shippingAddress:u})}static#t=this.\u0275fac=function(u){return new(u||d)(l.LFG(m.eN))};static#e=this.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},0:(h,p,o)=>{o.d(p,{M:()=>m});var a=o(4769),l=o(9862);let m=(()=>{class i{constructor(s){this._HttpClient=s}getAllProducts(s=1){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products?page=${s}`)}getAllcategories(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/categories")}getproductdetails(s){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/products/${s}`)}getcategorydetails(s){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/categories/${s}`)}getAllBrands(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/brands")}getBrandDetails(s){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/brands/${s}`)}static#t=this.\u0275fac=function(t){return new(t||i)(a.LFG(l.eN))};static#e=this.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);