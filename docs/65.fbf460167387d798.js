"use strict";(self.webpackChunkFreshcart=self.webpackChunkFreshcart||[]).push([[65],{8065:(P,m,l)=>{l.r(m),l.d(m,{ForgetpasswordComponent:()=>I});var i=l(6814),n=l(95),t=l(4769),d=l(9862);let u=(()=>{class r{constructor(e){this._HttpClient=e,this.baseurl="https://ecommerce.routemisr.com/api/v1/auth/"}forgotPasswords(e){return this._HttpClient.post(this.baseurl+"forgotPasswords",e)}resetcode(e){return this._HttpClient.post(this.baseurl+"verifyResetCode",e)}resetpassword(e){return this._HttpClient.put(this.baseurl+"resetPassword",e)}static#t=this.\u0275fac=function(o){return new(o||r)(t.LFG(d.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var g=l(1120);function f(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"please fillout this field"),t.qZA())}function c(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"enter correct email "),t.qZA())}function _(r,a){if(1&r&&(t.TgZ(0,"div",9),t.YNc(1,f,2,0,"p",10),t.YNc(2,c,2,0,"p",10),t.qZA()),2&r){const e=t.oxw(2);let o,s;t.xp6(1),t.Q6J("ngIf",null==(o=e.forgetpassword.get("email"))?null:o.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(s=e.forgetpassword.get("email"))?null:s.getError("email"))}}function w(r,a){if(1&r&&(t.TgZ(0,"div",11)(1,"p"),t._uU(2),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(2),t.Oqu(e.msg)}}const p=function(r,a){return{"is-valid":r,"is-invalid":a}};function x(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.forgotpassword())}),t.TgZ(1,"div",3),t._UZ(2,"input",4),t.TgZ(3,"label",5),t._uU(4,"enter your email:"),t.qZA()(),t.YNc(5,_,3,2,"div",6),t.TgZ(6,"button",7),t._uU(7,"send email"),t.qZA(),t.YNc(8,w,3,1,"div",8),t.qZA()}if(2&r){const e=t.oxw();let o,s;t.Q6J("formGroup",e.forgetpassword),t.xp6(2),t.Q6J("ngClass",t.WLB(4,p,null==(o=e.forgetpassword.get("email"))?null:o.valid,(null==(o=e.forgetpassword.get("email"))?null:o.invalid)&&(null==(o=e.forgetpassword.get("email"))?null:o.dirty))),t.xp6(3),t.Q6J("ngIf",(null==(s=e.forgetpassword.get("email"))?null:s.errors)&&(null==(s=e.forgetpassword.get("email"))?null:s.dirty)),t.xp6(3),t.Q6J("ngIf",e.msg)}}function h(r,a){if(1&r&&(t.TgZ(0,"div",11)(1,"p"),t._uU(2),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(2),t.Oqu(e.msg)}}function C(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.resetyourCode())}),t.TgZ(1,"div",3),t._UZ(2,"input",12),t.TgZ(3,"label",13),t._uU(4,"enter resetCode:"),t.qZA()(),t.TgZ(5,"button",7),t._uU(6,"reset Code"),t.qZA(),t.YNc(7,h,3,1,"div",14),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("formGroup",e.resetCode),t.xp6(7),t.Q6J("ngIf",e.msg)}}function v(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"please fillout this field"),t.qZA())}function Z(r,a){1&r&&(t.TgZ(0,"p"),t._uU(1,"password must be at least 6 letters or numbers "),t.qZA())}function T(r,a){if(1&r&&(t.TgZ(0,"div",9),t.YNc(1,v,2,0,"p",10),t.YNc(2,Z,2,0,"p",10),t.qZA()),2&r){const e=t.oxw(2);let o,s;t.xp6(1),t.Q6J("ngIf",null==(o=e.resetPassword.get("newPassword"))?null:o.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(s=e.resetPassword.get("newPassword"))?null:s.getError("pattern"))}}function F(r,a){if(1&r&&(t.TgZ(0,"div",11)(1,"p"),t._uU(2),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(2),t.Oqu(e.msg)}}function b(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.resetyourPassword())}),t.TgZ(1,"div",3),t._UZ(2,"input",15),t.TgZ(3,"label",16),t._uU(4,"enter new password:"),t.qZA()(),t.YNc(5,T,3,2,"div",6),t.TgZ(6,"button",7),t._uU(7,"Resset pasword"),t.qZA(),t.YNc(8,F,3,1,"div",8),t.qZA()}if(2&r){const e=t.oxw();let o,s;t.Q6J("formGroup",e.resetPassword),t.xp6(2),t.Q6J("ngClass",t.WLB(4,p,null==(o=e.resetPassword.get("newPassword"))?null:o.valid,(null==(o=e.resetPassword.get("newPassword"))?null:o.invalid)&&(null==(o=e.forgetpassword.get("newPassword"))?null:o.dirty))),t.xp6(3),t.Q6J("ngIf",(null==(s=e.resetPassword.get("newPassword"))?null:s.errors)&&(null==(s=e.resetPassword.get("newPassword"))?null:s.dirty)),t.xp6(3),t.Q6J("ngIf",e.msg)}}let I=(()=>{class r{constructor(e,o){this._ForgetpasswordService=e,this._Router=o,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.msg="",this.forgetpassword=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.resetCode=new n.cw({resetCode:new n.NI("",[n.kI.required])}),this.resetPassword=new n.cw({newPassword:new n.NI("",[n.kI.required,n.kI.pattern(/^[0-9a-zA-Z_@]{6,}$/)])})}forgotpassword(){let e=this.forgetpassword.value;this.email=e.email,this._ForgetpasswordService.forgotPasswords(e).subscribe({next:o=>{console.log(o),this.msg=o.message,this.step1=!1,this.step2=!0,console.log(o)},error:o=>{this.msg=o.error.message}})}resetyourCode(){this._ForgetpasswordService.resetcode(this.resetCode.value).subscribe({next:e=>{this.msg=e.status,this.step1=!1,this.step2=!1,this.step3=!0},error:e=>{this.msg=e.error.message}})}resetyourPassword(){let e=this.resetPassword.value;e.email=this.email,this._ForgetpasswordService.resetpassword(e).subscribe({next:o=>{o.token&&(localStorage.setItem("etoken",o.token),this._Router.navigate(["/home"]))},error:o=>{this.msg=o.error.message}})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(u),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-forgetpassword"]],standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[1,"w-75","m-auto","p-5","bg-main-light","mt-3","shadow","border","rounded"],["class","w-75 mx-auto mb-3",3,"formGroup","ngSubmit",4,"ngIf"],[1,"w-75","mx-auto","mb-3",3,"formGroup","ngSubmit"],[1,"form-floating"],["type","email","id","email","placeholder","enter your email:","formControlName","email",1,"form-control",3,"ngClass"],["for","email"],["class","alert alert-danger w-50 text-center  mx-auto",4,"ngIf"],[1,"main-btn","w-50","d-block","mx-auto","mt-3","p-3","rounded"],["class","alert alert-danger mb-0 mt-3 w-50 mx-auto",4,"ngIf"],[1,"alert","alert-danger","w-50","text-center","mx-auto"],[4,"ngIf"],[1,"alert","alert-danger","mb-0","mt-3","w-50","mx-auto"],["type","text","id","resetCode","placeholder","enterresetCode:","formControlName","resetCode",1,"form-control"],["for","resetCode"],["class","alert alert-danger mb-0  mt-3 w-50 mx-auto",4,"ngIf"],["type","password","id","password","placeholder","enter new password :","formControlName","newPassword",1,"form-control",3,"ngClass"],["for","password"]],template:function(o,s){1&o&&(t.TgZ(0,"section",0),t.YNc(1,x,9,7,"form",1),t.YNc(2,C,8,2,"form",1),t.YNc(3,b,9,7,"form",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",s.step1),t.xp6(1),t.Q6J("ngIf",s.step2),t.xp6(1),t.Q6J("ngIf",s.step3))},dependencies:[i.ez,i.mk,i.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return r})()}}]);